<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="ClopWindows.App.Views.Settings.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:loc="clr-namespace:ClopWindows.App.Localization"
             mc:Ignorable="d"
             d:DesignHeight="600"
             d:DesignWidth="800">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="32">
            <StackPanel>
                <TextBlock Text="{loc:Loc settings.header.title}" FontSize="24" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                <TextBlock Text="{loc:Loc settings.header.subtitle}" FontSize="13" Foreground="{DynamicResource Brush.SecondaryText}" Margin="0,6,0,0" TextWrapping="Wrap"/>
            </StackPanel>

            <Border Margin="0,24,0,0" Padding="20" Background="{DynamicResource Brush.SurfaceBackground}" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1" CornerRadius="12">
                <StackPanel>
                    <TextBlock Text="{loc:Loc settings.section.appearance}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                    <StackPanel Margin="0,12,0,0">
                        <TextBlock Text="{loc:Loc settings.theme.mode}" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                        <ComboBox Margin="0,6,0,0"
                                  ItemsSource="{Binding ThemeOptions}"
                                  SelectedItem="{Binding SelectedThemeOption}"
                                  DisplayMemberPath="DisplayName"
                                  AutomationProperties.Name="{loc:Loc settings.theme.mode}"
                                  Background="{DynamicResource Brush.FieldBackground}"
                                  BorderBrush="{DynamicResource Brush.FieldBorder}"
                                  Foreground="{DynamicResource Brush.FieldForeground}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border Margin="0,16,0,0" Padding="20" Background="{DynamicResource Brush.SurfaceBackground}" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1" CornerRadius="12">
                <StackPanel>
                    <TextBlock Text="{loc:Loc settings.section.floatingHud}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                    <CheckBox Content="{loc:Loc settings.floatingHud.show}" Margin="0,12,0,0" IsChecked="{Binding EnableFloatingResults}"/>
                    <CheckBox Content="{loc:Loc settings.floatingHud.autoHide}" Margin="0,8,0,0" IsChecked="{Binding AutoHideFloatingResults}"/>
                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0" VerticalAlignment="Center">
                        <TextBlock x:Name="FloatingHudHideAfterLabel" Text="{loc:Loc settings.floatingHud.hideAfter}" VerticalAlignment="Center" Foreground="{DynamicResource Brush.PrimaryText}"/>
                        <TextBox Width="60"
                                 Margin="8,0,0,0"
                                 Text="{Binding AutoHideFloatingResultsAfter, UpdateSourceTrigger=PropertyChanged}"
                                 Background="{DynamicResource Brush.FieldBackground}"
                                 BorderBrush="{DynamicResource Brush.FieldBorder}"
                                 Foreground="{DynamicResource Brush.FieldForeground}"
                                 AutomationProperties.LabeledBy="{Binding ElementName=FloatingHudHideAfterLabel}"
                                 AutomationProperties.HelpText="{loc:Loc settings.floatingHud.hideAfter.help}"
                                 AutomationProperties.Name="{loc:Loc settings.autohide.seconds.accessible}"/>
                        <TextBlock Text="{loc:Loc settings.floatingHud.hideAfterSuffix}" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource Brush.SecondaryText}"/>
                    </StackPanel>
                    <StackPanel Margin="0,16,0,0">
                        <TextBlock Text="{loc:Loc settings.floatingHud.pinHeading}" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                        <TextBlock Text="{loc:Loc settings.floatingHud.pinDescription}" FontSize="12" Foreground="{DynamicResource Brush.SecondaryText}" Margin="0,4,0,12" TextWrapping="Wrap"/>
                        <StackPanel Orientation="Horizontal">
                            <Button Content="{loc:Loc settings.floatingHud.choosePlacement}"
                                    Command="{Binding BeginHudPlacementCommand}"
                                    Padding="18,6"/>
                            <Button Content="{loc:Loc settings.floatingHud.clearPin}"
                                    Command="{Binding ClearHudPlacementCommand}"
                                    Margin="8,0,0,0"
                                    Padding="18,6"/>
                        </StackPanel>
                        <TextBlock Text="{Binding FloatingHudPlacementStatus}"
                                   Margin="0,8,0,0"
                                   FontSize="12"
                                   Foreground="{DynamicResource Brush.SecondaryText}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border Margin="0,16,0,0" Padding="20" Background="{DynamicResource Brush.SurfaceBackground}" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1" CornerRadius="12">
                <StackPanel>
                    <TextBlock Text="{loc:Loc settings.section.clipboard}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                    <CheckBox Content="{loc:Loc settings.clipboard.optimiseImages}" Margin="0,12,0,0" IsChecked="{Binding EnableClipboardOptimiser}"/>
                    <CheckBox Content="{loc:Loc settings.clipboard.copyBack}" Margin="0,8,0,0" IsChecked="{Binding AutoCopyToClipboard}"/>
                    <CheckBox Content="{loc:Loc settings.clipboard.optimiseVideos}" Margin="0,8,0,0" IsChecked="{Binding OptimiseVideoClipboard}"/>
                    <CheckBox Content="{loc:Loc settings.clipboard.optimisePdfs}" Margin="0,8,0,0" IsChecked="{Binding OptimisePdfClipboard}"/>
                </StackPanel>
            </Border>

            <Border Margin="0,16,0,0" Padding="20" Background="{DynamicResource Brush.SurfaceBackground}" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1" CornerRadius="12">
                <StackPanel>
                    <TextBlock Text="{loc:Loc settings.section.automation}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                    <CheckBox Content="{loc:Loc settings.automation.watchImages}" Margin="0,12,0,0" IsChecked="{Binding EnableAutomaticImageOptimisations}"/>
                    <CheckBox Content="{loc:Loc settings.automation.watchVideos}" Margin="0,8,0,0" IsChecked="{Binding EnableAutomaticVideoOptimisations}"/>
                    <CheckBox Content="{loc:Loc settings.automation.watchPdfs}" Margin="0,8,0,0" IsChecked="{Binding EnableAutomaticPdfOptimisations}"/>
                </StackPanel>
            </Border>

            <Border Margin="0,16,0,0" Padding="20" Background="{DynamicResource Brush.SurfaceBackground}" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1" CornerRadius="12">
                <StackPanel>
                    <TextBlock Text="{loc:Loc settings.section.preservation}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                    <CheckBox Content="{loc:Loc settings.preservation.preserveDates}" Margin="0,12,0,0" IsChecked="{Binding PreserveDates}"/>
                    <CheckBox Content="{loc:Loc settings.preservation.stripMetadata}" Margin="0,8,0,0" IsChecked="{Binding StripMetadata}"/>
                </StackPanel>
            </Border>

            <Border Margin="0,16,0,0" Padding="20" Background="{DynamicResource Brush.SurfaceBackground}" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1" CornerRadius="12">
                <StackPanel>
                    <TextBlock Text="{loc:Loc settings.section.shortcuts}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                    <TextBlock Text="{loc:Loc settings.shortcuts.subtitle}" FontSize="13" Foreground="{DynamicResource Brush.SecondaryText}" Margin="0,6,0,0" TextWrapping="Wrap"/>

                    <TextBlock Text="{loc:Loc settings.shortcuts.app}" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}" Margin="0,18,0,0"/>
                    <ItemsControl ItemsSource="{Binding AppShortcutPreferences}" Margin="0,10,0,0" AutomationProperties.HelpText="{loc:Loc settings.shortcuts.list.help}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="12" Margin="0,0,0,8" Background="{DynamicResource Brush.CardBackground}" BorderBrush="{DynamicResource Brush.CardBorder}" BorderThickness="1" CornerRadius="8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="{Binding Description}" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                                            <TextBlock Text="{Binding DefaultBindingLabel}" Foreground="{DynamicResource Brush.MutedText}" FontSize="12" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding CurrentBinding}" Foreground="{DynamicResource Brush.PrimaryText}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <Button Content="{loc:Loc settings.shortcuts.change}" Command="{Binding CaptureCommand}" Margin="4,0,0,0" Padding="14,4"/>
                                            <Button Content="{loc:Loc settings.shortcuts.clear}" Command="{Binding ClearCommand}" Margin="8,0,0,0" Padding="12,4"/>
                                            <Button Content="{loc:Loc settings.shortcuts.reset}" Command="{Binding ResetCommand}" Margin="8,0,0,0" Padding="12,4"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <TextBlock Text="{loc:Loc settings.shortcuts.global}" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}" Margin="0,18,0,0"/>
                    <ItemsControl ItemsSource="{Binding GlobalShortcutPreferences}" Margin="0,10,0,0" AutomationProperties.HelpText="{loc:Loc settings.shortcuts.list.help}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="12" Margin="0,0,0,8" Background="{DynamicResource Brush.CardBackground}" BorderBrush="{DynamicResource Brush.CardBorder}" BorderThickness="1" CornerRadius="8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel>
                                            <TextBlock Text="{Binding Description}" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}"/>
                                            <TextBlock Text="{Binding DefaultBindingLabel}" Foreground="{DynamicResource Brush.MutedText}" FontSize="12" Margin="0,4,0,0"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding CurrentBinding}" Foreground="{DynamicResource Brush.PrimaryText}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <Button Content="{loc:Loc settings.shortcuts.change}" Command="{Binding CaptureCommand}" Margin="4,0,0,0" Padding="14,4"/>
                                            <Button Content="{loc:Loc settings.shortcuts.clear}" Command="{Binding ClearCommand}" Margin="8,0,0,0" Padding="12,4"/>
                                            <Button Content="{loc:Loc settings.shortcuts.reset}" Command="{Binding ResetCommand}" Margin="8,0,0,0" Padding="12,4"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <Border Margin="0,16,0,0"
                    Padding="20"
                    Background="{DynamicResource Brush.SurfaceSecondaryBackground}"
                    BorderBrush="{DynamicResource Brush.SurfaceBorder}"
                    BorderThickness="1"
                    CornerRadius="12">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Width="56" Height="56" Background="{DynamicResource Brush.ContentBackground}" CornerRadius="12" BorderBrush="{DynamicResource Brush.SurfaceBorder}" BorderThickness="1">
                        <Image Source="/Assets/Brand/Assets.xcassets/lowtech.imageset/typewriter.png" Stretch="Uniform" Margin="4" AutomationProperties.Name="Low-tech logo"/>
                    </Border>
                    <StackPanel Margin="12,0,0,0">
                        <TextBlock Text="{loc:Loc settings.about.title}" FontSize="14" FontWeight="SemiBold" Foreground="{DynamicResource Brush.PrimaryText}" TextWrapping="Wrap"/>
                        <TextBlock Text="{loc:Loc settings.about.subtitle}" FontSize="12" Foreground="{DynamicResource Brush.SecondaryText}" TextWrapping="Wrap"/>
                        <TextBlock>
                            <Hyperlink NavigateUri="https://lowtechguys.com/" RequestNavigate="Hyperlink_RequestNavigate">
                                <Run Text="{loc:Loc settings.about.link}"/>
                            </Hyperlink>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
